<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>TECHNO POWER — Мир шлангов</title>
<style>
  :root{
    --bg:url('fon.jpg');
    --accent:#ff7b00;
    --accent-2:#ffa733;
    --card:#2a2a2a;
    --muted:#cccccc;
    --text-light:#ffffff;
    --rounded:16px;
    --gap:16px;
    font-family:"Inter",system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
  }
  html,body{height:100%;}
  body{
    margin:0;
    background:var(--bg);
    color:#222;
    line-height:1.4;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    overflow-x: hidden;
  }

  .container{max-width:980px;margin:0 auto;padding:18px;}

  header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:12px 20px;
    background:rgba(42, 42, 42, 0.95);
    border-radius:12px;
    box-shadow:0 4px 14px rgba(0,0,0,0.06);
    backdrop-filter: blur(10px);
    transition: all 0.3s ease;
    animation: fadeInDown 0.8s ease;
  }
  header:hover {
    box-shadow: 0 6px 20px rgba(0,0,0,0.12);
  }

  .logo{
    display:flex;
    align-items:center;
    gap:12px;
  }
  .logoImg{
    width:64px;
    height:64px;
    border-radius:12px;
    object-fit:cover;
    transition: transform 0.3s ease;
  }
  .logoImg:hover {
    transform: scale(1.05);
  }
  .logo .text{line-height:1;}
  .logo .text h1{margin:0;font-size:18px;color: #fafafa;}
  .logo .text p{margin:0;font-size:12px;color:var(--muted);}

  .hero{
    margin-top:20px;
    background:rgba(42, 42, 42, 0.9);
    border-radius:var(--rounded);
    padding:36px 28px;
    display:flex;
    gap:20px;
    align-items:center;
    overflow:hidden;
    box-shadow:0 6px 18px rgba(0,0,0,0.06);
    position: relative;
    animation: slideInUp 0.8s ease;
    backdrop-filter: blur(5px);
  }
  .hero::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(42,42,42,0.9) 0%, rgba(42,42,42,0.7) 100%);
    z-index: -1;
  }
  .hero .left{flex:1; z-index: 1;}
  .hero h2{margin:0;font-size:32px;color:var(--accent);}
  .hero p{color:var(--muted);margin:10px 0 18px; font-size: 16px;}
  .hero .utp{
    display:inline-block;
    background:var(--accent);
    color:#fff;
    padding:10px 20px;
    border-radius:999px;
    font-weight:600;
    animation: pulse 2s infinite;
    box-shadow: 0 4px 10px rgba(255, 123, 0, 0.3);
  }
  .hero .cta{
    margin-left:12px;
    padding:10px 20px;
    border-radius:999px;
    background:#fff;
    border:0;
    font-weight:600;
    cursor:pointer;
    box-shadow:0 6px 18px rgba(0,0,0,0.06);
    transition: all 0.3s ease;
  }
  .hero .cta:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.12);
  }
  .hero .visual{
    width:260px;
    height:160px;
    border-radius:12px;
    background:#e6e9ff url('hero.jpg') center/cover no-repeat;
    box-shadow:inset 0 0 40px rgba(0,0,0,0.03);
    transition: transform 0.5s ease;
    overflow: hidden;
  }
  .hero .visual:hover {
    transform: scale(1.05);
  }

  .block{
    margin-top:20px;
    background:rgba(42, 42, 42, 0.9);
    padding:24px;
    border-radius:var(--rounded);
    box-shadow:0 8px 30px rgba(17,17,17,0.04);
    backdrop-filter: blur(5px);
    transition: all 0.3s ease;
    animation: fadeIn 0.8s ease;
  }
  .block:hover {
    box-shadow: 0 10px 35px rgba(17,17,17,0.08);
  }
  .block h3{margin:0 0 16px;font-size:22px;color:var(--accent);}
  .row{display:flex;gap:var(--gap);flex-wrap:wrap;}
  .btn{
    background:#f3f4fb;
    border:0;
    padding:12px 20px;
    border-radius:12px;
    cursor:pointer;
    font-weight:600;
    min-width:140px;
    box-shadow:0 6px 14px rgba(91,79,185,0.06);
    transition:transform .2s ease, box-shadow .2s ease, background .2s ease;
    position: relative;
    overflow: hidden;
  }
  .btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    transition: left 0.5s;
  }
  .btn:hover::before {
    left: 100%;
  }
  .btn:hover{
    transform:translateY(-2px);
    box-shadow:0 8px 18px rgba(91,79,185,0.1);
  }
  .btn:active{transform:translateY(1px); box-shadow:0 4px 10px rgba(91,79,185,0.06);}
  .btn.active{
    background:linear-gradient(90deg,var(--accent),var(--accent-2));
    color:#fff;
    box-shadow: 0 6px 15px rgba(255, 123, 0, 0.3);
  }
  .subblock{margin-top:16px;display:flex;gap:12px;flex-wrap:wrap;}
  .meters{display:flex;gap:10px;flex-wrap:wrap;}
  .meter{
    padding:10px 14px;
    border-radius:10px;
    background:#f8f9ff;
    border:1px solid #eef0ff;
    cursor:pointer;
    min-width:84px;
    text-align:center;
    transition: all 0.2s ease;
  }
  .meter:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  }
  .meter.active{
    background:var(--accent);
    color:#fff;
    border-color:transparent;
    transform:translateY(1px);
    box-shadow: 0 4px 8px rgba(255, 123, 0, 0.3);
  }

  .priceBox{
    margin-top:16px;
    padding:20px;
    border-radius:12px;
    background:linear-gradient(180deg,#fff,#f6f7ff);
    display:flex;
    justify-content:space-between;
    align-items:center;
    animation: fadeIn 0.5s ease;
  }
  .price{font-size:24px;font-weight:700;color:var(--accent);}
  .leaveBtn{
    background:var(--accent);
    color:#fff;
    padding:12px 20px;
    border-radius:10px;
    border:0;
    cursor:pointer;
    font-weight:700;
    transition: all 0.3s ease;
    box-shadow: 0 4px 10px rgba(255, 123, 0, 0.3);
  }
  .leaveBtn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 15px rgba(255, 123, 0, 0.4);
    background: var(--accent-2);
  }

  .steps{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
    gap:18px;
    margin-top:16px;
  }
  .step{
    background:#fff;
    padding:18px;
    border-radius:10px;
    box-shadow:0 6px 18px rgba(91,79,185,0.04);
    transition: all 0.3s ease;
    animation: fadeIn 0.8s ease;
  }
  .step:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(91,79,185,0.1);
  }
  .step .num{
    width:34px;
    height:34px;
    border-radius:100px;
    background:var(--accent);
    color:#fff;
    display:inline-flex;
    align-items:center;
    justify-content:center;
    margin-bottom:8px;
    font-weight:700;
    transition: transform 0.3s ease;
  }
  .step:hover .num {
    transform: scale(1.1);
  }

  .reviews{
    margin-top:20px;
    padding:24px;
    border-radius:12px;
    background:linear-gradient(180deg,#eef0ff,#f7f7ff);
    animation: fadeIn 0.8s ease;
  }
  .carousel{display:flex;gap:16px;overflow:hidden; padding: 10px 0;}
  .review{
    min-width:280px;
    background:#fff;
    padding:18px;
    border-radius:10px;
    box-shadow:0 6px 18px rgba(17,17,17,0.04);
    transition: all 0.3s ease;
    animation: fadeIn 0.8s ease;
  }
  .review:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(17,17,17,0.08);
  }
  .carouselNav{display:flex;gap:8px;margin-top:10px;justify-content:center;}
  .iconBtn{
    background:transparent;
    border:1px solid rgba(0,0,0,0.06);
    padding:8px 12px;
    border-radius:8px;
    cursor:pointer;
    transition: all 0.2s ease;
  }
  .iconBtn:hover {
    background: var(--accent);
    color: white;
    border-color: var(--accent);
  }

  .contacts{
    margin-top:20px;
    padding:24px;
    border-radius:12px;
    background:rgba(255, 255, 255, 0.9);
    display:flex;
    gap:24px;
    align-items:center;
    backdrop-filter: blur(5px);
    animation: fadeIn 0.8s ease;
  }
  .contacts .left{flex:1;}
  .contacts .right{
    width:260px;
    height:180px;
    border-radius:10px;
    overflow: hidden;
    box-shadow: 0 6px 15px rgba(0,0,0,0.1);
    transition: transform 0.3s ease;
  }
  .contacts .right:hover {
    transform: scale(1.03);
  }

  footer{
    margin:30px 0 80px;
    text-align:center;
    color:var(--muted);
    font-size:13px;
    animation: fadeIn 0.8s ease;
  }

  .modal{
    position:fixed;
    inset:0;
    display:flex;
    align-items:center;
    justify-content:center;
    background:rgba(17,17,17,0.45);
    visibility:hidden;
    opacity:0;
    transition:opacity .3s ease, visibility .3s;
    z-index: 1000;
  }
  .modal.open{
    visibility:visible;
    opacity:1;
  }
  .modalContent{
    width:92%;
    max-width:520px;
    background:#fff;
    padding:24px;
    border-radius:16px;
    box-shadow:0 14px 40px rgba(17,17,17,0.25);
    transform: translateY(20px);
    transition: transform 0.3s ease;
  }
  .modal.open .modalContent {
    transform: translateY(0);
  }
  .formRow{display:flex;gap:10px;margin-bottom:14px;}
  input[type="text"],input[type="tel"],textarea{
    width:100%;
    padding:12px;
    border-radius:10px;
    border:1px solid #e7e9fb;
    transition: all 0.2s ease;
    font-family: inherit;
  }
  input[type="text"]:focus, input[type="tel"]:focus, textarea:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 2px rgba(255, 123, 0, 0.2);
  }
  .closeBtn{
    background:transparent;
    border:0;
    float:right;
    font-size:20px;
    cursor:pointer;
    transition: color 0.2s ease;
  }
  .closeBtn:hover {
    color: var(--accent);
  }

  /* Анимации */
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  
  @keyframes fadeInDown {
    from {
      opacity: 0;
      transform: translateY(-20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  @keyframes slideInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  @keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
  }

  /* Анимация появления при скролле */
  .fade-in {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.6s ease, transform 0.6s ease;
  }
  
  .fade-in.visible {
    opacity: 1;
    transform: translateY(0);
  }

  @media(min-width:880px){
    .hero{padding:42px 36px;}
    .hero h2{font-size:36px;}
  }

  header h1 {
    color: #fafafa;
  }

  header p {
    color: #ffffff;
  }
  .contacts {
    display: flex;
    justify-content: space-between;
    align-items: stretch;
    flex-wrap: wrap;
    padding: 24px;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 20px;
  }

  .contacts .left {
    flex: 1;
    min-width: 280px;
  }

  .contacts .right {
    flex: 1;
    min-width: 250px;
    height: 200px;
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 0 0 20px rgba(0,0,0,0.1);
  }
  .heroImg {
    width: 100%;
    height:100%;
    object-fit: cover;
    border-radius: 20px;
  }
</style>
</head>
<body>
<div class="container">
  <header>
    <div class="logo">
      <img src="log.jpg" alt="TECHNO POWER" class="logoImg">
      <div class="text">
        <h1>TECHNO POWER</h1>
        <p>Мир шлангов</p>
      </div>
    </div>
    <nav aria-label="Контакты">
      <div style="text-align:right">
        <div style="font-weight:700;color:var(--accent)">8 (771) 772-06-53</div>
        <div style="font-size:12px;color:var(--muted)">Рыскулова 70, Жусанды 1Б</div>
      </div>
    </nav>
  </header>

  <section class="hero" role="banner" aria-label="УТП">
    <div class="left">
      <h2>Шланги и защита для мойки — на складе</h2>
      <p>От 10 000 тг за 5 метров. Забирайте через 2 часа после заказа!</p>
      <span class="utp">От 10.000 за 5 метров!</span>
      <button class="cta" onclick="scrollToSelection()">Выбрать шланг</button>
    </div>
   <div class="visual" aria-hidden="true">
  <img src="" alt="Шланги" class="heroImg">
</div>

  </section>

  <section id="selection" class="block fade-in" aria-labelledby="selectTitle">
    <h3 id="selectTitle">Выберите тип шланга</h3>
    <div class="row">
      <button class="btn mainBtn" data-main="6mm">Внутренний диаметр 6мм</button>
      <button class="btn mainBtn" data-main="8mm">Внутренний диаметр 8мм</button>
      <button class="btn mainBtn" data-main="protect">Защита на шланг</button>
    </div>

    <div id="secondary" class="subblock" aria-hidden="true" style="display:none"></div>

    <div id="metersBlock" class="subblock" style="display:none">
      <div class="meters" id="metersList"></div>
    </div>

    <div class="priceBox" aria-live="polite">
      <div>
        <div style="color:var(--muted);font-size:13px">Итоговая цена</div>
        <div class="price" id="priceText">—</div>
      </div>
      <div>
        <button class="leaveBtn" id="leaveBtn">Оставить заявку</button>
      </div>
    </div>
  </section>

  <section class="block fade-in" aria-labelledby="howTitle">
    <h3 id="howTitle">Как проходит получение товара</h3>
    <div class="steps">
      <div class="step"><div class="num">1</div><div><strong>Оставляете заявку</strong><div class="muted">Через форму или по телефону</div></div></div>
      <div class="step"><div class="num">2</div><div><strong>Мы связываемся</strong><div class="muted">Подтверждаем заказ</div></div></div>
      <div class="step"><div class="num">3</div><div><strong>Оплата</strong><div class="muted">Удобным способом</div></div></div>
      <div class="step"><div class="num">4</div><div><strong>Получаете товар</strong><div class="muted">Самовывоз или Яндекс.Курьер</div></div></div>
    </div>
    <div style="margin-top:16px;text-align:right"><button class="leaveBtn" onclick="openModal()">Оставить заявку</button></div>
  </section>

  <section class="reviews block fade-in" aria-labelledby="revTitle">
    <h3 id="revTitle">Отзывы</h3>
    <div class="carousel" id="carousel">
      <div class="review"><strong>Маша</strong><p>Быстро оформили, забрала через 2 часа. Шланг качественный.</p></div>
      <div class="review"><strong>Иван</strong><p>Цены адекватные, менеджер помог с подбором.</p></div>
      <div class="review"><strong>Алия</strong><p>Покупали с защитой — отлично защищает при транспортировке.</p></div>
    </div>
    <div class="carouselNav">
      <button class="iconBtn" id="prev">◀</button>
      <button class="iconBtn" id="next">▶</button>
    </div>
  </section>

 <section class="contacts fade-in" aria-labelledby="contactTitle">
  <div class="left">
    <h3 id="contactTitle">Контакты</h3>
    <p style="margin:6px 0">Адрес: проспект Рыскулова 70, улица Жусанды 1Б</p>
    <p style="margin:6px 0">Телефон: <strong>8 (771) 772-06-53</strong></p>
    <p style="margin:6px 0">Инстаграм: <strong>@mirshlangov</strong></p>
    <p style="margin:6px 0">Часы работы: с 9:00 до 18:00</p>
    <div style="margin-top:14px">
      <button class="btn" onclick="openWhatsApp()">Связаться в WhatsApp</button>
      <button class="btn" onclick="openTel()">Позвонить</button>
    </div>
  </div>

  <!-- Правая часть — карта -->
  <div class="right" aria-hidden="true">
    <iframe
      src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2904.421505752742!2d76.91737917587098!3d43.28449387112209!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x38836c0af44ec199%3A0x2e237c300a67e22d!2z0L_RgNC-0YHQv9C10LrRgiDQoNGL0YHQutGD0LvQvtCy0LAgNzAsINCQ0LvQvNCw0YLRiyAwNTAwNTA!5e0!3m2!1sru!2skz!4v1760871938348!5m2!1sru!2skz"
      width="100%" height="100%" style="border:0; border-radius:20px;" 
      allowfullscreen="" loading="lazy">
    </iframe>
  </div>
</section>

  <footer>© TECHNO POWER — Мир шлангов</footer>
</div>

<div class="modal" id="modal">
  <div class="modalContent" role="dialog" aria-modal="true" aria-label="Форма заявки">
    <button class="closeBtn" onclick="closeModal()">✕</button>
    <h3>Оставить заявку</h3>
    <form id="orderForm" onsubmit="submitForm(event)">
      <div class="formRow">
        <input type="text" id="clientName" placeholder="Ваше имя" required />
      </div>
      <div class="formRow">
        <input type="tel" id="clientPhone" placeholder="Телефон" required />
      </div>
      <div class="formRow">
        <input type="text" id="productSummary" readonly />
      </div>
      <div style="text-align:right">
        <button type="submit" class="leaveBtn">Отправить</button>
      </div>
    </form>
  </div>
</div>

<script>
/* ====== Данные цен из ТЗ (структура) ====== */
const prices = {
  protection: {
    "6mm": {5:5500,10:11000,12:13200,15:16500,20:22000},
    "8mm": {5:6000,10:12000,12:14400,15:18000,20:24000}
  },
  hoses: {
    "1SN": {
      "6mm": {5:9562,10:15512,12:17892,15:21462,20:27412},
      "8mm": {5:10855.6,10:18065.6,12:20949.6,15:25275.6,20:32485.6}
    },
    "2SN": {
      "6mm": {5:11620,10:19628,12:22831.2,15:27636,20:35644},
      "8mm": {5:12927.6,10:22209.6,12:25922.4,15:31491.6,20:40773.6}
    }
  }
};

/* ====== UI logic ====== */
const mainBtns = document.querySelectorAll('.mainBtn');
const secondary = document.getElementById('secondary');
const metersBlock = document.getElementById('metersBlock');
const metersList = document.getElementById('metersList');
const priceText = document.getElementById('priceText');
const leaveBtn = document.getElementById('leaveBtn');

let state = {
  main: null,       // '6mm' | '8mm' | 'protect'
  secondary: null,  // for hoses: '1SN'|'2SN' ; for protect: '6mm'|'8mm' (same)
  meters: null
};

function resetSecondary(){
  secondary.innerHTML='';
  metersList.innerHTML='';
  metersBlock.style.display='none';
  secondary.style.display='none';
  state.secondary=null; state.meters=null;
  priceText.textContent='—';
}

mainBtns.forEach(b=>{
  b.addEventListener('click', ()=> {
    mainBtns.forEach(x=>x.classList.remove('active'));
    b.classList.add('active');
    state.main = b.dataset.main;
    buildSecondary(state.main);
  });
});

function buildSecondary(main){
  resetSecondary();
  secondary.style.display='flex';
  if(main === 'protect'){
    // offer 6mm / 8mm protection types
    const btn6 = makeBtn('Защита 6мм','protect-6mm'); btn6.onclick=()=>selectSecondary('6mm');
    const btn8 = makeBtn('Защита 8мм','protect-8mm'); btn8.onclick=()=>selectSecondary('8mm');
    secondary.appendChild(btn6); secondary.appendChild(btn8);
  } else {
    // hoses: show 1SN / 2SN and also ensure selected diameter matches main (6/8)
    const btn1 = makeBtn('1SN','1SN'); btn1.onclick=()=>selectSecondary('1SN');
    const btn2 = makeBtn('2SN','2SN'); btn2.onclick=()=>selectSecondary('2SN');
    secondary.appendChild(btn1); secondary.appendChild(btn2);
    // also set default diameter to selected main
    // state.secondary will be set on SN selection
  }
}

function makeBtn(text, id){
  const el = document.createElement('button');
  el.className='btn';
  el.id=id;
  el.innerText=text;
  return el;
}

function selectSecondary(val){
  // mark active
  Array.from(secondary.children).forEach(ch=>ch.classList.remove('active'));
  const clicked = Array.from(secondary.children).find(ch=>ch.onclick && (ch.id.includes(val) || ch.innerText.includes(val)));
  // fallback: find by text content
  if(!clicked){
    // try by button text
    const found = Array.from(secondary.children).find(ch=>ch.innerText.includes(val) || ch.id===val);
    if(found) found.classList.add('active');
  } else clicked.classList.add('active');

  state.secondary = val;
  buildMeters();
}

function buildMeters(){
  metersList.innerHTML='';
  const meterOptions=[5,10,12,15,20];
  meterOptions.forEach(m=>{
    const el = document.createElement('div');
    el.className='meter';
    el.innerText = m + ' м';
    el.dataset.m = m;
    el.addEventListener('click', ()=> {
      document.querySelectorAll('.meter').forEach(x=>x.classList.remove('active'));
      el.classList.add('active');
      state.meters = m;
      calcPrice();
    });
    metersList.appendChild(el);
  });
  metersBlock.style.display='block';
}

function calcPrice(){
  // determine price based on state
  if(!state.main || !state.secondary || !state.meters) { priceText.textContent='—'; return; }
  let p = null;
  if(state.main === 'protect'){
    // protection table uses '6mm' or '8mm' as secondary
    const diam = state.secondary;
    p = prices.protection[diam] ? prices.protection[diam][state.meters] : null;
  } else {
    // hoses: state.main gives diameter (6mm/8mm), state.secondary gives type (1SN/2SN)
    const diam = state.main;
    const type = state.secondary;
    p = prices.hoses[type] && prices.hoses[type][diam] ? prices.hoses[type][diam][state.meters] : null;
  }
  if(p==null) priceText.textContent='—';
  else priceText.textContent = Number(p).toLocaleString('ru-RU') + ' тг';
}

/* helper: scroll to selection */
function scrollToSelection(){
  document.getElementById('selection').scrollIntoView({behavior:'smooth', block:'start'});
}

/* Modal logic */
const modal = document.getElementById('modal');
function openModal(){
  // set product summary
  const summary = document.getElementById('productSummary');
  let prod = '—';
  if(state.main === 'protect'){
    prod = `Защита ${state.secondary || '?'} ${state.meters? state.meters + 'м' : ''}`;
  } else if(state.main){
    prod = `${state.secondary || '?'} ${state.main} ${state.meters? state.meters + 'м' : ''}`;
  }
  summary.value = prod + ' — ' + (priceText.textContent || '—');
  modal.classList.add('open');
}
function closeModal(){ modal.classList.remove('open'); }

leaveBtn.addEventListener('click', openModal);

function submitForm(e){
  e.preventDefault();
  const name = document.getElementById('clientName').value.trim();
  const phone = document.getElementById('clientPhone').value.trim();
  const prod = document.getElementById('productSummary').value.trim();
  // Здесь можно добавить запрос к серверу (fetch) для отправки заявки.
  alert('Заявка отправлена:\n' + name + '\n' + phone + '\n' + prod);
  document.getElementById('orderForm').reset();
  closeModal();
}

/* Carousel simple */
let carouselIndex = 0;
const carousel = document.getElementById('carousel');
const reviews = carousel.children;
document.getElementById('prev').addEventListener('click', ()=>{ moveCarousel(-1); });
document.getElementById('next').addEventListener('click', ()=>{ moveCarousel(1); });

function moveCarousel(dir){
  carouselIndex = (carouselIndex + dir + reviews.length) % reviews.length;
  const w = reviews[carouselIndex].offsetLeft;
  carousel.scrollTo({left:w,behavior:'smooth'});
}

/* quick helpers */
function openWhatsApp(){
  window.open('https://wa.me/77717720653','_blank');
}
function openTel(){
  window.location.href = 'tel:+77117720653';
}

/* close modal on outside click */
modal.addEventListener('click', (ev)=>{ if(ev.target===modal) closeModal(); });

/* Accessibility: allow keyboard for buttons */
document.addEventListener('keydown', (e)=>{
  if(e.key==='Escape') closeModal();
});

/* Анимация появления при скролле */
const observerOptions = {
  threshold: 0.1,
  rootMargin: '0px 0px -50px 0px'
};

const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      entry.target.classList.add('visible');
    }
  });
}, observerOptions);

document.addEventListener('DOMContentLoaded', () => {
  const elementsToAnimate = document.querySelectorAll('.fade-in');
  elementsToAnimate.forEach(el => {
    observer.observe(el);
  });
});
</script>
</body>
</html>
